<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Solitaire</title><style>html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}body,html{width:100%;height:100%;margin:0;border:0;padding:0}body{overflow:hidden;background-color:#000;background-color:#61ad4a}.app-canvas,.app-container{margin:0;border:0;padding:0}.app-canvas{width:100%;height:100%}</style></head><body><div class="app-container js-app-container"><canvas class="app-canvas js-app-canvas">Your browser does not support canvas elements.</canvas></div><script>!function(e){var s={};function o(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=s,o.d=function(t,i,e){o.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(i,t){if(1&t&&(i=o(i)),8&t)return i;if(4&t&&"object"==typeof i&&i&&i.__esModule)return i;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:i}),2&t&&"string"!=typeof i)for(var s in i)o.d(e,s,function(t){return i[t]}.bind(null,s));return e},o.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(i,"a",i),i},o.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},o.p="",o(o.s=0)}([function(t,i,e){"use strict";e.r(i);function s(t,i){for(var e in this.callback=i,this.totalImages=Object.keys(t).length,this.imagesLoaded=0,this.result={},this.doneLoading=!1,t){var s=new Image;s.addEventListener("load",function(){this.loader.imagesLoaded+=1,(this.loader.result[this.name]=this).loader.check()}),s.loader=this,s.name=e,s.src=t[e]}}s.prototype.check=function(){this.doneLoading||this.totalImages!=this.imagesLoaded||(this.doneLoading=!0,this.callback(this.result))};var o=s;function n(t,i,e,s,o){this.image=t,this.origin=i,this.size=e,this.margin=s,this.map=o}n.prototype.getSpriteOrigin=function(t){return{x:this.origin.x+t.x*(this.size.x+this.margin.x),y:this.origin.y+t.y*(this.size.y+this.margin.y)}},n.prototype.drawSprite=function(t,i){i=this.map[i],i=this.getSpriteOrigin(i);t.drawImage(this.image,i.x,i.y,this.size.x,this.size.y,0,0,this.size.x,this.size.y)};function h(t,i){t.mozImageSmoothingEnabled=i,t.webkitImageSmoothingEnabled=i,t.msImageSmoothingEnabled=i,t.imageSmoothingEnabled=i}var l=n;function r(t,i,e,s,o){this.image=t,this.origin=i,this.size=e,this.margin=s,this.map={};for(var n=0;n<o.length;n+=1)for(var h=o[n],r=0;r<h.length;r+=1){var a=h[r];this.map[a]={x:r,y:n}}this.spriter=new l(this.image,this.origin,this.size,this.margin,this.map)}r.prototype.drawChar=function(i,t){i.save(),h(i,!1);try{this.spriter.drawSprite(i,t)}catch(t){this.spriter.drawSprite(i,"?")}i.restore()},r.prototype.drawString=function(t,i){t.save();for(var e=0;e<i.length;e+=1)this.drawChar(t,i[e]),t.translate(this.size.x+this.margin.x,0);t.restore()},r.prototype.getStringSize=function(t){return{width:t.length*this.size.x+(t.length-1)*this.margin.x,height:this.size.y}};var a=r;function d(t){this.regWork=t.regWork,this.finalWork=t.finalWork,this.stopCallback=t.stopCallback||d.default.stopCallback,this.interval=t.interval||d.default.interval,this.maxNumIntervals=t.maxNumIntervals||d.default.maxNumIntervals,this.time=0,this.totalTime=0,this.looping=!1,this.stopped=!0,this.loopCallBound=this.loopCall.bind(this)}d.default={stopCallback:function(){},interval:8,maxNumIntervals:4},d.prototype.accumulate=function(t){this.time+=t,this.totalTime+=t},d.prototype.loopCall=function(){this.newTime=(new Date).getTime(),this.dt=this.newTime-this.oldTime,this.accumulate(this.dt);for(var t=Math.floor(this.time/this.interval),i=Math.min(t,this.maxNumIntervals),e=0;e<i;e+=1){if(!this.regWork()){e+=1;break}}0<e&&(this.time-=e*this.interval,this.finalWork()),this.oldTime=this.newTime,this.looping?window.requestAnimationFrame(this.loopCallBound):(this.stopped=!0,this.stopCallback())},d.prototype.start=function(){this.stopped&&(this.oldTime=(new Date).getTime(),this.looping=!0,this.stopped=!1,this.loopCallBound())},d.prototype.stop=function(){this.looping=!1},d.prototype.clearTime=function(){this.time=0},d.prototype.resetTime=function(){this.time=0,this.totalTime=0};var u=d;function c(t,i,e){this.target=t,this.eventType=i,this.work=e,this.active=!1}c.prototype.start=function(){this.active||(this.target.addEventListener(this.eventType,this.work),this.active=!0)},c.prototype.stop=function(){this.active&&(this.target.removeEventListener(this.eventType,this.work),this.active=!1)};function p(t){document.body.style.cursor=t}function g(t){return{x:t.pageX,y:t.pageY}}function f(t,i){return{x:(t.x-i.offsetLeft)/i.offsetHeight,y:(t.y-i.offsetTop)/i.offsetHeight}}function m(t,i){if(i.x>t.x&&i.y>t.y){var e=i.x-t.x,i=i.y-t.y;if(e<t.width&&i<t.height)return!0}return!1}var v=c;function y(t,i){this.elements=t,this.options=i,"number"!=typeof this.options.xCenter&&(this.options.xCenter=.5*this.options.aspectWidth/this.options.aspectHeight),this.running=!1,this.armed=!1;var s=0;this.elements.forEach(function(t){s+=t.top||0,t.y=s;var i=this.styles[t.type].fontSize,e=this.options.font.getStringSize(t.text);t.width=e.width/e.height*i,y.isButton(t)&&(t.width+=2*this.styles[t.type].padding,t.buttonState="normal",s+=2*this.styles[t.type].padding),t.x=-t.width/2+this.options.xCenter,s+=i,t.height=s-t.y,s+=t.bottom||0}.bind(this)),this.mousemoveLS=new v(window,"mousemove",y.handleMousemove.bind(this)),this.mousedownLS=new v(window,"mousedown",y.handleMousedown.bind(this)),this.mouseupLS=new v(window,"mouseup",y.handleMouseup.bind(this))}y.prototype.styles={mainTitle:{fontSize:.15},title:{fontSize:.1},subtitle:{fontSize:.06},button:{fontSize:.07,padding:.015,backgroundColor:{normal:"rgb(255, 255, 255)",hover:"rgb(220, 220, 220)",down:"rgb(53, 94, 41)"}},gameButton:{fontSize:.0455,padding:.012,backgroundColor:{normal:"rgb(255, 255, 255)",hover:"rgb(220, 220, 220)",down:"rgb(53, 94, 41)"}}},y.isButton=function(t){return"button"==t.type||"gameButton"==t.type},y.prototype.draw=function(i){i.save(),this.elements.forEach(function(t){i.save(),i.translate(t.x*i.canvas.height,t.y*i.canvas.height),y.isButton(t)?this.drawButton(i,t):this.drawFontElement(i,t),i.restore()}.bind(this)),i.restore()},y.prototype.drawFontElement=function(t,i){t.save();var e=this.styles[i.type].fontSize*t.canvas.height/this.options.font.size.y;t.scale(e,e),this.options.font.drawString(t,i.text),t.restore()},y.prototype.drawButton=function(t,i){t.save(),t.scale(t.canvas.height,t.canvas.height),t.fillStyle=this.styles[i.type].backgroundColor[i.buttonState],t.fillRect(0,0,i.width,i.height),t.restore(),t.save(),t.translate(this.styles[i.type].padding*t.canvas.height,this.styles[i.type].padding*t.canvas.height),this.drawFontElement(t,i),t.restore()},y.prototype.start=function(t){this.running||(this.ctx=t,this.arm(),this.dualLooper=new u({regWork:function(){},finalWork:function(){this.draw(this.ctx)}.bind(this)}),this.dualLooper.start(),this.running=!0)},y.prototype.stop=function(t){this.running&&(this.disarm(),this.stopWork=t,this.dualLooper.stopCallback=function(){this.running=!1,this.stopWork()}.bind(this),this.dualLooper.stop())},y.prototype.arm=function(){this.armed||(this.mousemoveLS.start(),this.mousedownLS.start(),this.mouseupLS.start(),this.armed=!0)},y.prototype.disarm=function(){this.armed&&(this.mousemoveLS.stop(),this.mousedownLS.stop(),this.mouseupLS.stop(),this.armed=!1)},y.handleMousemove=function(t){t=f(g(t),this.options.parent);this.updateButtonStates(t)},y.handleMousedown=function(t){t=f(g(t),this.options.parent);this.updateButtonStates(t)},y.handleMouseup=function(t){var i=f(g(t),this.options.parent);this.updateButtonStates(i);for(var e=0;e<this.elements.length;e+=1){var s=this.elements[e];if(y.isButton(s))if(m(s,i))for(var o=0;o<this.options.listeners.length;o+=1){var n=this.options.listeners[o];n.id==s.id&&"up"==n.event&&n.action()}}},y.prototype.updateButtonStates=function(t){for(var i=!1,e=0;e<this.elements.length;e+=1){var s=this.elements[e];y.isButton(s)&&(m(s,t)?(i=!0,this.options.mousedownTracker.mousedown?s.buttonState="down":s.buttonState="hover"):s.buttonState="normal")}p(i?"pointer":"")};var w=y;function P(){this.mousedown=!1,this.mousedownLS=new v(window,"mousedown",function(){this.mousedown=!0}.bind(this)),this.mouseupLS=new v(window,"mouseup",function(){this.mousedown=!1}.bind(this))}P.prototype.start=function(){this.mousedownLS.start(),this.mouseupLS.start()},P.prototype.stop=function(){this.mousedownLS.stop(),this.mouseupLS.stop()};e=P;function x(t,i){this.work=t,this.delay=i,this.waiting=!1,this.timeout}x.prototype.set=function(){this.waiting&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){this.waiting=!1,this.work()}.bind(this),this.delay),this.waiting=!0},x.prototype.clear=function(){this.waiting&&(clearTimeout(this.timeout),this.waiting=!1)};i=x;function S(t){this.seed=t||10}S.prototype.random=function(){this.seed+=1;var t=1e5*Math.sin(this.seed);return t-Math.floor(t)},S.prototype.randomInt=function(t,i){return Math.floor(this.random()*(i-t+1))+t},S.prototype.randomInRange=function(t,i){return this.random()*(i-t)+t};function b(t){return{x:(t=t.touches[0]||t.changedTouches[0]).pageX,y:t.pageY}}var C=S;function k(t){this.ctx=t.ctx,this.font=t.font,this.suitSpriter=t.suitSpriter,this.mousedownTracker=t.mousedownTracker,this.quitCallback=t.quitCallback,this.srng=new C(t.seed),this.aspectWidth=t.aspectWidth||16,this.aspectHeight=t.aspectHeight||9,this.oldPos=null,this.running=!1,this.armed=!1,this.labelMargin=.01,this.fontHeight=.04,this.cardWidth=.18,this.cardHeight=.27,this.horizSpace=.036,this.facedownSpacing=.02,this.faceupSpacing=this.getFaceupSpacing(),this.pilesY=this.getPilesY(),this.horizMargin=this.getHorizMargin(),this.turnPilePos=this.getTurnPilePos(),this.turnedPilePos=this.getTurnedPilePos(),this.buttonsPos=this.getButtonsPos(),this.foundationsPos=this.getFoundationsPos(),this.pileBasePos=this.getPileBasePos(),this.mousemoveLS=new v(window,"mousemove",k.handleMousemove.bind(this)),this.mousedownLS=new v(window,"mousedown",k.handleMousedown.bind(this)),this.mouseupLS=new v(window,"mouseup",k.handleMouseup.bind(this)),this.touchmoveLS=new v(window,"touchmove",k.handleTouchmove.bind(this)),this.touchstartLS=new v(window,"touchstart",k.handleTouchstart.bind(this)),this.touchendLS=new v(window,"touchend",k.handleTouchend.bind(this)),this.buttonsMenu=new w([{top:2.34*this.horizSpace,type:"gameButton",text:"Quit",id:"quit"},{top:this.horizSpace,type:"gameButton",text:"New Game",id:"newgame"}],{font:this.font,parent:this.ctx.canvas,mousedownTracker:this.mousedownTracker,aspectWidth:this.aspectWidth,aspectHeight:this.aspectHeight,xCenter:this.horizMargin+2.5*this.cardWidth+2*this.horizSpace,listeners:[{id:"quit",event:"up",action:function(){console.log("Quit"),this.stop(function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.quitCallback()}.bind(this))}.bind(this)},{id:"newgame",event:"up",action:function(){this.newGame()}.bind(this)}]})}k.RANKS=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],k.SUITS=["clubs","diamonds","spades","hearts"],k.NUM_FOUNDATIONS=4,k.NUM_PILES=7,k.prototype.getFaceupSpacing=function(){return this.labelMargin+this.fontHeight},k.prototype.getPilesY=function(){return this.cardHeight+2*this.horizSpace},k.prototype.getHorizMargin=function(){return(this.aspectWidth/this.aspectHeight*1-7*this.cardWidth-6*this.horizSpace)/2},k.prototype.getTurnPilePos=function(){return{x:this.horizMargin,y:this.horizSpace,width:this.cardWidth,height:this.cardHeight}},k.prototype.getTurnedPilePos=function(){return{x:this.horizMargin+this.cardWidth+this.horizSpace,y:this.horizSpace,width:this.cardWidth,height:this.cardHeight}},k.prototype.getButtonsPos=function(){return{x:this.horizMargin+2*this.cardWidth+2*this.horizSpace,y:this.turnedPilePos.y,width:this.cardWidth,height:this.cardHeight}},k.prototype.getFoundationsPos=function(){for(var t=[],i=this.horizSpace,e=0;e<k.NUM_FOUNDATIONS;e+=1){var s=this.aspectWidth/this.aspectHeight-this.horizMargin;s-=(k.NUM_FOUNDATIONS-e)*this.cardWidth,s-=(k.NUM_FOUNDATIONS-e-1)*this.horizSpace,t.push({x:s,y:i,width:this.cardWidth,height:this.cardHeight,foundation:e,type:"FOUNDATION",location:null})}return t},k.prototype.getPileBasePos=function(){for(var t=[],i=0;i<k.NUM_PILES;i+=1){var e={};e.y=this.pilesY,e.x=this.horizMargin+i*(this.cardWidth+this.horizSpace),e.width=this.cardWidth,e.height=this.cardHeight,e.pile=i,e.type="PILE",e.location=null,t.push(e)}return t},k.prototype.newGame=function(){console.log("New game. Seed:",this.srng.seed),this.heldCard=null,this.hoverPos=null,this.foundations=[[],[],[],[]];var t=this.getShuffledDeck();this.piles=k.getNewPiles(t),this.turnPile=t,this.turnedPile=[],this.updateTurnPileCards(),this.updatePileCardPositions()},k.prototype.start=function(){this.running||(console.log("Start Solitaire"),this.arm(),this.dualLooper=new u({regWork:function(){},finalWork:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.drawTurnPile(),this.drawTurnedPile(),this.drawPiles(),this.drawFoundations(),this.buttonsMenu.draw(this.ctx),this.drawHoverPos(),this.drawHeldCards()}.bind(this)}),this.dualLooper.start(),this.running=!0)},k.prototype.stop=function(t){this.running&&(console.log("Stop Solitaire"),this.disarm(),this.stopWork=t,this.dualLooper.stopCallback=function(){this.running=!1,this.stopWork()}.bind(this),this.dualLooper.stop())},k.prototype.arm=function(){this.armed||(this.mousemoveLS.start(),this.mousedownLS.start(),this.mouseupLS.start(),this.touchmoveLS.start(),this.touchstartLS.start(),this.touchendLS.start(),this.armed=!0)},k.prototype.disarm=function(){this.armed&&(this.mousemoveLS.stop(),this.mousedownLS.stop(),this.mouseupLS.stop(),this.touchmoveLS.stop(),this.touchstartLS.stop(),this.touchendLS.stop(),this.armed=!1)},k.moveCard=function(t,i,e){null!=t&&(t.x+=i,t.y+=e,k.moveCard(t.next,i,e))},k.handleTouchmove=function(t){t.preventDefault();var i=b(t),e=f(i,this.ctx.canvas);null==this.oldPos?(t.movementX=0,t.movementY=0):(t.movementX=i.x-this.oldPos.x,t.movementY=i.y-this.oldPos.y),this.oldPos=i,m(this.buttonsPos,e)?w.handleMousemove.call(this.buttonsMenu,{pageX:i.x,pageY:i.y}):this.handleMove(t,i)},k.handleMousemove=function(t){var i=g(t),e=f(i,this.ctx.canvas);m(this.buttonsPos,e)?w.handleMousemove.call(this.buttonsMenu,{pageX:i.x,pageY:i.y}):this.handleMove(t,i)},k.prototype.handleMove=function(t,i){i=f(i,this.ctx.canvas);null==this.heldCard&&(0<this.turnPile.length||0<this.turnedPile.length)&&m(this.turnPilePos,i)?p("pointer"):(this.hoverPos=this.getHoverPos(i),null!=this.hoverPos&&"TURNED_PILE"==this.hoverPos.location&&null!=this.heldCard&&(this.hoverPos=null),null!=this.heldCard&&(i=t.movementX/this.ctx.canvas.height,t=t.movementY/this.ctx.canvas.height,k.moveCard(this.heldCard,i,t)),null!=this.heldCard||null!=this.hoverPos?p("pointer"):p(""))},k.handleTouchstart=function(t){t.preventDefault();var i=b(t),t=f(i,this.ctx.canvas);this.oldPos=i,m(this.buttonsPos,t)?w.handleMousedown.call(this.buttonsMenu,{pageX:i.x,pageY:i.y}):this.handleDown(i)},k.handleMousedown=function(t){var i=g(t),t=f(i,this.ctx.canvas);m(this.buttonsPos,t)?w.handleMousedown.call(this.buttonsMenu,{pageX:i.x,pageY:i.y}):this.handleDown(i)},k.prototype.handleDown=function(t){var i=f(t,this.ctx.canvas);if(0<this.turnPile.length||0<this.turnedPile.length){if(m(this.turnPilePos,i))return 0<this.turnPile.length?this.turnCard():this.resetTurnPile(),0<this.turnPile.length||0<this.turnedPile.length?p("pointer"):p(""),void(this.hoverPos=null);if(m(this.turnedPilePos,i)&&null==this.heldCard)return this.heldCard=this.turnedPile.pop(),this.heldCard.location="HELD",this.heldCard.fromTurnedPile=!0,this.hoverPos=null,void p("pointer")}t=this.getHoverPos(i);null==this.heldCard&&null!=t?(this.heldCard=t,this.removeCardFromPile(this.heldCard),this.hoverPos=this.getHoverPos(i)):this.hoverPos=t,null!=this.heldCard||null!=this.hoverPos?p("pointer"):p("")},k.handleTouchend=function(t){t.preventDefault();var i=b(t),t=f(i,this.ctx.canvas);this.oldPos=i,m(this.buttonsPos,t)?w.handleMouseup.call(this.buttonsMenu,{pageX:i.x,pageY:i.y}):this.handleUp(i)},k.handleMouseup=function(t){var i=g(t),t=f(i,this.ctx.canvas);m(this.buttonsPos,t)?w.handleMouseup.call(this.buttonsMenu,{pageX:i.x,pageY:i.y}):this.handleUp(i)},k.prototype.handleUp=function(t){var i,e=f(t,this.ctx.canvas);null==this.heldCard&&(0<this.turnPile.length||0<this.turnedPile.length)&&(m(this.turnPilePos,e)||m(this.turnedPilePos,e))?p("pointer"):(this.hoverPos=this.getHoverPos(e),null!=this.heldCard&&(k.canPutOn(this.hoverPos,this.heldCard)?("FOUNDATION"==this.hoverPos.location||"FOUNDATION"==this.hoverPos.type?(t=this.foundations[this.hoverPos.foundation],this.heldCard.x=this.hoverPos.x,this.heldCard.y=this.hoverPos.y,this.heldCard.foundation=this.hoverPos.foundation,this.heldCard.location="FOUNDATION",t.push(this.heldCard)):this.addCardToPile(this.hoverPos.pile,this.heldCard),"number"!=typeof this.heldCard.fromPile||0<(i=this.piles[this.heldCard.fromPile]).length&&(i[i.length-1].facedown=!1),this.heldCard.fromTurnedPile=!1):this.heldCard.fromTurnedPile?(this.turnedPile.push(this.heldCard),this.heldCard.location="TURNED_PILE",this.heldCard.fromTurnedPile=!1,this.heldCard.x=this.turnedPilePos.x,this.heldCard.y=this.turnedPilePos.y):(i=this.heldCard.fromPile,this.addCardToPile(i,this.heldCard))),this.updatePileCardPositions(),this.heldCard=null,this.hoverPos=this.getHoverPos(e),null!=this.hoverPos?p("pointer"):p(""))},k.prototype.resetTurnPile=function(){if(0==this.turnPile.length&&0<this.turnedPile.length){this.turnPile=this.turnedPile.reverse(),this.turnedPile=[];for(var t=0;t<this.turnPile.length;t+=1){var i=this.turnPile[t];i.x=this.turnPilePos.x,i.y=this.turnPilePos.y,i.facedown=!0}}},k.prototype.turnCard=function(){var t;0<this.turnPile.length&&((t=this.turnPile.pop()).facedown=!1,t.location="TURNED_PILE",t.x=this.horizMargin+this.cardWidth+this.horizSpace,t.y=this.horizSpace,this.turnedPile.push(t))},k.canPutOn=function(t,i){return null!=t&&null!=i&&("PILE"==t.type&&12==i.rank||("FOUNDATION"==t.type&&0==i.rank||("FOUNDATION"==t.location&&i.rank==t.rank+1&&i.suit==t.suit||t.suit%2!=i.suit%2&&i.rank==t.rank-1)))},k.prototype.addCardToPile=function(t,i){var e;null!=i&&(0<(e=this.piles[t]).length&&(e[e.length-1].next=i),i.pile=t,i.location="PILE",e.push(i),this.addCardToPile(t,i.next))},k.prototype.removeCardFromPile=function(t){var i,e;null!=t&&t.pile<this.piles.length&&(e=(i=this.piles[t.pile]).indexOf(t),i.splice(e,1),0<i.length&&0<e&&(i[e-1].next=null),t.fromPile=t.pile,t.pile=null,this.removeCardFromPile(t.next))},k.prototype.getHoverPos=function(t){if(m(this.turnedPilePos,t)&&0<this.turnedPile.length)return this.turnedPile[this.turnedPile.length-1];for(var i=0;i<this.foundations.length;i+=1){var e=this.foundations[i],e=0==e.length?this.foundationsPos[i]:e[e.length-1];if(null!=this.heldCard&&k.canPutOn(e,this.heldCard)&&m(e,t))return e}for(var s=0;s<this.piles.length;s+=1){var o=this.piles[s];if(0==o.length){if(null!=this.heldCard&&12==this.heldCard.rank){var n=this.pileBasePos[s];if(m(n,t))return n}}else for(var h=o.length-1;0<=h;--h){var r=o[h];if((null!=this.heldCard&&k.canPutOn(r,this.heldCard)||null==this.heldCard)&&!r.facedown&&this.heldCard!=r&&m(r,t))return r}}return null},k.prototype.drawHoverPos=function(){null!=this.hoverPos&&(this.ctx.save(),this.ctx.scale(this.ctx.canvas.height,this.ctx.canvas.height),this.ctx.translate(this.hoverPos.x-.1*this.cardWidth,this.hoverPos.y-.1*this.cardHeight),this.ctx.fillStyle="rgba(255, 255, 255, 0.4)",this.ctx.fillRect(0,0,1.2*this.cardWidth,1.2*this.cardHeight),this.ctx.restore())},k.prototype.drawHeldCards=function(){this.tryDrawCard(this.heldCard)},k.prototype.tryDrawCard=function(t){null!=t&&(this.drawCard(t),this.tryDrawCard(t.next))},k.prototype.drawCard=function(t){t.facedown?this.drawFacedownCard(t):this.drawFaceupCard(t)},k.prototype.drawPiles=function(){for(var t=0;t<this.piles.length;t+=1)for(var i=this.piles[t],e=0;e<i.length;e+=1){var s=i[e];this.drawCard(s)}},k.prototype.drawFoundations=function(){for(var t=0;t<this.foundations.length;t+=1){var i,e=this.foundations[t];0==e.length?(i=this.foundationsPos[t],this.ctx.save(),this.ctx.scale(this.ctx.canvas.height,this.ctx.canvas.height),this.ctx.translate(i.x,i.y),this.ctx.fillStyle="rgb(100, 100, 100)",this.ctx.fillRect(0,0,this.cardWidth,this.cardHeight),this.ctx.restore()):(e=e[e.length-1],this.drawFaceupCard(e))}},k.prototype.drawTurnPile=function(){var t;0<this.turnPile.length?(t=this.turnPile[this.turnPile.length-1],this.drawCard(t)):0<this.turnedPile.length&&(t=this.turnPilePos,this.ctx.save(),this.ctx.scale(this.ctx.canvas.height,this.ctx.canvas.height),this.ctx.translate(t.x,t.y),this.ctx.fillStyle="rgb(100, 100, 100)",this.ctx.fillRect(0,0,this.cardWidth,this.cardHeight),this.ctx.restore())},k.prototype.drawTurnedPile=function(){var t;0<this.turnedPile.length&&(t=this.turnedPile[this.turnedPile.length-1],this.drawCard(t))},k.prototype.drawFacedownCard=function(t){this.ctx.save(),this.ctx.scale(this.ctx.canvas.height,this.ctx.canvas.height),this.ctx.translate(t.x,t.y),this.ctx.fillStyle="rgb(233, 233, 233)",this.ctx.fillRect(0,0,this.cardWidth,this.cardHeight);this.ctx.fillStyle="rgb(150, 150, 255)",this.ctx.fillRect(.03*this.cardWidth,.03*this.cardHeight,.94*this.cardWidth,.94*this.cardHeight),this.ctx.restore()},k.prototype.drawFaceupCardBackground=function(t){this.ctx.save(),this.ctx.scale(this.ctx.canvas.height,this.ctx.canvas.height),this.ctx.translate(t.x,t.y),this.ctx.fillStyle="rgb(244, 244, 244)",this.ctx.fillRect(0,0,this.cardWidth,this.cardHeight);this.ctx.fillStyle="rgb(255, 255, 255)",this.ctx.fillRect(.02*this.cardWidth,.02*this.cardHeight,.96*this.cardWidth,.96*this.cardHeight),this.ctx.restore()},k.prototype.drawFaceupCard=function(t){this.drawFaceupCardBackground(t),this.ctx.save(),this.ctx.translate((t.x+this.labelMargin)*this.ctx.canvas.height,(t.y+this.labelMargin)*this.ctx.canvas.height),this.ctx.save();var i=this.ctx.canvas.height*this.fontHeight/this.font.size.y;this.ctx.scale(i,i),this.font.drawString(this.ctx,k.RANKS[t.rank]),this.ctx.restore(),this.ctx.translate(this.font.size.x/this.font.size.y*this.fontHeight*(String(k.RANKS[t.rank]).length+1)*this.ctx.canvas.height,0);i=this.ctx.canvas.height*this.fontHeight/(this.suitSpriter.size.y+7);this.ctx.scale(i,i),h(this.ctx,!1),this.suitSpriter.drawSprite(this.ctx,k.SUITS[t.suit]),this.ctx.restore()},k.prototype.updateTurnPileCards=function(){for(var t=0;t<this.turnPile.length;t+=1){var i=this.turnPile[t];i.facedown=!0,i.x=this.turnPilePos.x,i.y=this.turnPilePos.y}},k.prototype.updatePileCardPositions=function(){for(var t=0;t<this.piles.length;t+=1)for(var i=this.piles[t],e=this.pilesY,s=0;s<i.length;s+=1){var o=i[s];o.y=e,o.x=this.horizMargin+t*(this.cardWidth+this.horizSpace),o.facedown?e+=this.facedownSpacing:e+=this.faceupSpacing}},k.getNewPiles=function(t){for(var i=[],e=0;e<7;e+=1){i.push([]);for(var s,o=0;o<e;o+=1){(s=t.pop()).facedown=!0,i[s.pile=e].push(s)}(s=t.pop()).facedown=!1,i[s.pile=e].push(s)}return i},k.prototype.getSortedDeck=function(){for(var t=[],i=0;i<k.SUITS.length;i+=1)for(var e=0;e<k.RANKS.length;e+=1)t.push({rank:e,suit:i,width:this.cardWidth,height:this.cardHeight,next:null,type:"CARD",location:null});return t},k.prototype.getShuffledDeck=function(){for(var t=this.getSortedDeck(),i=[],e=t.length,s=0;s<e;s+=1){var o=this.srng.randomInt(0,t.length-1),n=t[o];i.push(n),t.splice(o,1)}return i};var T=k;console.log("Hello");var M,A,L,z,E,H,W=document.querySelector(".js-app-canvas"),I=W.getContext("2d"),N=new e;function O(){var t=document.body,i=document.querySelector(".js-app-container"),e=document.querySelector(".js-app-canvas"),s=function(t,i,e,s){if(e<=0||s<=0)return{width:0,height:0};if(t<0||i<0||0===t&&0===i)return{width:0,height:0};if(0===t)return{width:0,height:s};if(0===i)return{width:e,height:0};var o,n,h,r=t/i,a=e/s;return r==a?(o=e,n=s):r<a?(o=(h=Math.floor(s/i))*t,n=h*i):a<r?(o=(h=Math.floor(e/t))*t,n=h*i):console.log("Unknown MaxChildSize condition. "+"childAspectWidth: ".concat(t,", ")+"childAspectHeight: ".concat(i,", ")+"parentWidth: ".concat(e,", ")+"parentHeight: ".concat(s)),{width:o,height:n}}(16,9,t.offsetWidth,t.offsetHeight);i.style.width="".concat(s.width,"px"),i.style.height="".concat(s.height,"px"),e.width=s.width,e.height=s.height;e=t.offsetWidth-s.width,s=t.offsetHeight-s.height;i.style.marginLeft="".concat(Math.floor(e/2),"px"),i.style.marginRight="".concat(Math.ceil(e/2),"px"),i.style.marginTop="".concat(Math.floor(s/2),"px"),i.style.marginBottom="".concat(Math.ceil(s/2),"px")}N.start(),new o({font5x14:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ0AAAA9CAYAAAC3Oms4AAAEGUlEQVR42u1d25KsIAwkU/7/L/e+7Kma43JJQoKo3S9b5WLE2OQCgSmFIBZDfv+i878a0JEjivZe+bV2EiC/1h5f1z3ypdHPCP2MnhfRH4881f1H4yVhIKymk1YlrpavUbosGvxS7omeAfgPHxr71yGL2KKVTdLdhygR92VbUpXsY+LFsMj1ZPUHg9gWg7BDnETx6E0CSLCN6x7FdL0At/VCMCgsIgHo3aftvza2kgn9zBABQffNJG0RrhylFDmMI8yTYESPYknuT0nuz5UzFaMEKaP/fxKMwzgK3hQPPRHSsD6rngkN6e40kqPjobcQb8V0jbRiuqiAGEo5YrieIT/KYkYMxFECs8KCy0RsTrzYleMOoQXn6QiSjnhHUEnEulPZqE/8vgTRS5c1pS2WEb66vXUZbLY/U6U+D2mv/l6HQfBI6bu1t5YueQYnUScYtImEFM7eE3+5ED7QPp2HESSRN5Hpyj8WdjCbzJasTYKyPM9KwtXEk6T2ar4cwR/TWkoUmWCIMQCOKM2yxnqt/p0XxWcSvN57ZcpXfy/Pgr8Y269MMEZVFBIxUm8INAZni+xRbrWaYHxuoKwItyLKePVfG2wS245CnYgihCzCff8P3212J50nsendI8EkXR231j40lNetciL7KN+6PxKsEJLlRJcSlTJfziMNF9aKO2vye5W9PdelfZbF7XoGdHZp2Tbuk9M7N/x+rDIhloOkI5bjoAoIhjPE46GdUR/NEWk22YgyTb/y+uzoF4V+xPmMzE3Q25nO2kQpDPf22s9Oi1jlw9j/CJeDgOdg0bdenkj0JhqjrAI9i21wZxmXS7/f0VCKkFxDy0DdBGavlrU4y8lGs5u2I05J8pIrkmCaM0Uea+VapCtl7kSgVunOiKylY2W91SfWA4DkQkvXq8d7lFU97jxiLsjys63d463cOZEgnkXsbUHS7ZXJWkvDoby+lWeynE93jjkQoEQo4rKZJCCy/UxCRRCPAYlNEARBEARBbB2sepaSoAh8R9v9elMC6DxT++zMoB5BCQCC+rvN1srPYvLWSGz5hcPzlrbaLxW2av9au6yi3i1T/soB8RjSnddUW/NZSFDq6GiJ2YKAqzxK7b6RjO1+pql3xoXXFWj2UY6I4tmP+YYlpdqEtDT+Jzu/ABoE0MZWvRgERb90M7JclpjOUtmriYcQIH82prNWVs9a03Sfr+koBvGahZAwKhEOwkS5TATJ166Zet0xHEnb8phOnK4JpV4DpzXrnjPddju4cVSCnvnTR9KI6aTojki7PKbzBp8S/NF2jsdkQ9lag7GNXjXZa88ki8HFoJEkeJRiKYK8yhLtGLfj7p21JhJFEYPA2J+ZeOwuk8OPIx13NI3JIEnPoe6Jy8n9GrBcnSDpCIIgwvEDV7H1CorcrpoAAAAASUVORK5CYII=",suits:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEcAAAATCAYAAADCrxD+AAAA7UlEQVRYw9VYyw7EIAgE0v//ZfbUZLPRdWTGakl6KUic4SFq1pdsfIyw628nEj+IeAGIk8S4ghgn/KByFSKckwCTXC/PtG9i/+lj/d40JfYLAimvns39f6SPDcRIe1C1NyH62ETMlN0owqskGqcTCkpVMo+dPlVyUpQhqc40tjxYclTzyxFz0KqyOk6S6EnsHORmfjQ5KMCeXZWgp+ac1xDcso+3g0PAVzMwBKO8s3cm0Xo5yTHYmIN6E/tZ0lNm/VwTkXNRBvjuMkVv96ONpgjUcU8WaZYjH7Fh+j1i2AMb+fS0yrzl0OWFRFwlH0+EVh6LhLYsAAAAAElFTkSuQmCC"},function(t){console.log("Images loaded"),A=new l((M=t).suits,{x:0,y:0},{x:17,y:19},{x:1,y:0},{clubs:{x:0,y:0},spades:{x:1,y:0},diamonds:{x:2,y:0},hearts:{x:3,y:0}}),L=new a(M.font5x14,{x:1,y:1},{x:5,y:14},{x:1,y:1},["AaBbCcDdEeFfGgHhIiJjKkLlMm","NnOoPpQqRrSsTtUuVvWwXxYyZz","`1234567890-=[]\\;',./ ",'~!@#$%^&*()_+{}|:"<>?']),z=new w([{top:.15,bottom:.15,type:"mainTitle",text:"Solitaire"},{top:0,bottom:.05,type:"button",text:"Play",id:"play"},{type:"button",text:"About",id:"about"}],{font:L,parent:W,mousedownTracker:N,aspectWidth:16,aspectHeight:9,listeners:[{id:"play",event:"up",action:function(){z.stop(function(){(H=new T({seed:Math.floor((new Date).getTime()*Math.random()*.007),ctx:I,font:L,suitSpriter:A,mousedownTracker:N,quitCallback:function(){z.start(I)}})).newGame(),I.clearRect(0,0,W.width,W.height),H.start()})}},{id:"about",event:"up",action:function(){z.stop(function(){I.clearRect(0,0,W.width,W.height),console.log("Go to About menu"),E.start(I)})}}]}),E=new w([{top:.08,bottom:.01,type:"title",text:"Solitaire"},{top:0,bottom:.08,type:"subtitle",text:"Version 0.1.1"},{top:0,bottom:.05,type:"button",text:"Author: Costava",id:"author"},{top:0,bottom:.05,type:"button",text:"View source on GitHub",id:"source"},{type:"button",text:"Back",id:"back"}],{font:L,parent:W,mousedownTracker:N,aspectWidth:16,aspectHeight:9,listeners:[{id:"author",event:"up",action:function(){console.log("See author"),window.open("https://github.com/Costava","_blank")}},{id:"source",event:"up",action:function(){console.log("See source"),window.open("https://github.com/Costava/solitaire","_blank")}},{id:"back",event:"up",action:function(){E.stop(function(){I.clearRect(0,0,W.width,W.height),console.log("Go back to main menu"),z.start(I)})}}]}),z.start(I)});i=new i(O,150);new v(window,"resize",i.set.bind(i)).start(),O()}]);</script></body></html>